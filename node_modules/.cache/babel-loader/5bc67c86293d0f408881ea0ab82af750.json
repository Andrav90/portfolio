{"ast":null,"code":"import _classCallCheck from\"D:\\\\Coding\\\\React\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Coding\\\\React\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\Coding\\\\React\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\Coding\\\\React\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Coding\\\\React\\\\portfolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import Proton from\"proton-engine\";import RAFManager from\"raf-manager\";import Canvas from\"./Canvas\";var Particles=/*#__PURE__*/function(_React$Component){_inherits(Particles,_React$Component);var _super=_createSuper(Particles);function Particles(props){var _this;_classCallCheck(this,Particles);_this=_super.call(this,props);_this.renderProton=_this.renderProton.bind(_assertThisInitialized(_this));return _this;}_createClass(Particles,[{key:\"handleCanvasInited\",value:function handleCanvasInited(canvas){this.createProton(canvas);RAFManager.add(this.renderProton);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){try{RAFManager.remove(this.renderProton);this.proton.destroy();}catch(e){}}},{key:\"createProton\",value:function createProton(canvas){var num=Math.min(parseInt(window.innerWidth/(1000/145)),400);var proton=new Proton();var emitter=new Proton.Emitter();emitter.rate=new Proton.Rate(new Proton.Span(num),new Proton.Span(0.05,0.2));emitter.addInitialize(new Proton.Mass(1));emitter.addInitialize(new Proton.Radius(1,4));emitter.addInitialize(new Proton.Life(Infinity));var pointZone=new Proton.Position(new Proton.RectZone(0,0,canvas.width,canvas.height));emitter.addInitialize(pointZone);emitter.addInitialize(new Proton.Velocity(new Proton.Span(0.3,0.6),new Proton.Span(0,360),\"polar\"));emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2,0.9)));emitter.addBehaviour(new Proton.Color(\"#ffffff\"));emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(0,0,canvas.width,canvas.height),\"cross\"));emitter.emit(\"once\");emitter.damping=0;proton.addEmitter(emitter);var renderer=this.createRenderer(canvas);proton.addRenderer(renderer);setTimeout(function(){emitter.rate=new Proton.Rate(new Proton.Span(3),0.5);emitter.removeInitialize(pointZone);},0);this.proton=proton;this.emitter=emitter;this.renderer=renderer;}},{key:\"createRenderer\",value:function createRenderer(canvas){var _this2=this;var R=140;var context=canvas.getContext(\"2d\");var renderer=new Proton.CanvasRenderer(canvas);renderer.onProtonUpdateAfter=function(){var particles=_this2.emitter.particles;for(var i=0;i<particles.length;i++){for(var j=i+1;j<particles.length;j++){var pA=particles[i];var pB=particles[j];var dis=pA.p.distanceTo(pB.p);if(dis<R){var alpha=(1-dis/R)*0.5;context.strokeStyle=\"rgba(255,255,255,\"+alpha+\")\";context.beginPath();context.moveTo(pA.p.x,pA.p.y);context.lineTo(pB.p.x,pB.p.y);context.closePath();context.stroke();}}}};return renderer;}},{key:\"handleResize\",value:function handleResize(width,height){this.renderer.resize(width,height);}},{key:\"handleMouseDown\",value:function handleMouseDown(e){var _this3=this;for(var i=0;i<3;i++){this.emitter.particles[i].dead=true;}var x=e.nativeEvent.offsetX;var y=e.nativeEvent.offsetY;setTimeout(function(){_this3.emitter.p.x=x;_this3.emitter.p.y=y;_this3.emitter.emit(\"once\");},60);}},{key:\"handleMouseMove\",value:function handleMouseMove(e){var ease=0.3;var p0=this.emitter.particles[0];var x=e.nativeEvent.offsetX;var y=e.nativeEvent.offsetY;p0.p.x+=(x-p0.p.x)*ease;p0.p.y+=(y-p0.p.y)*ease;p0.radius=0;}},{key:\"handleMouseUp\",value:function handleMouseUp(e){this.emitter.stop();}},{key:\"renderProton\",value:function renderProton(){this.proton.update();// this.proton.stats.update(2);\n}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Canvas,{onMouseDown:this.handleMouseDown.bind(this),onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),onCanvasInited:this.handleCanvasInited.bind(this),onResize:this.handleResize.bind(this)});}}]);return Particles;}(React.Component);export{Particles as default};","map":{"version":3,"sources":["D:/Coding/React/portfolio/src/components/Particles.js"],"names":["React","Proton","RAFManager","Canvas","Particles","props","renderProton","bind","canvas","createProton","add","remove","proton","destroy","e","num","Math","min","parseInt","window","innerWidth","emitter","Emitter","rate","Rate","Span","addInitialize","Mass","Radius","Life","Infinity","pointZone","Position","RectZone","width","height","Velocity","addBehaviour","Alpha","getSpan","Color","CrossZone","emit","damping","addEmitter","renderer","createRenderer","addRenderer","setTimeout","removeInitialize","R","context","getContext","CanvasRenderer","onProtonUpdateAfter","particles","i","length","j","pA","pB","dis","p","distanceTo","alpha","strokeStyle","beginPath","moveTo","x","y","lineTo","closePath","stroke","resize","dead","nativeEvent","offsetX","offsetY","ease","p0","radius","stop","update","handleMouseDown","handleMouseMove","handleMouseUp","handleCanvasInited","handleResize","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Proton from \"proton-engine\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Canvas from \"./Canvas\";\r\n\r\nexport default class Particles extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderProton = this.renderProton.bind(this);\r\n    }\r\n\r\n    handleCanvasInited(canvas) {\r\n        this.createProton(canvas);\r\n        RAFManager.add(this.renderProton);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        try {\r\n            RAFManager.remove(this.renderProton);\r\n            this.proton.destroy();\r\n        } catch (e) { }\r\n    }\r\n\r\n    createProton(canvas) {\r\n        const num = Math.min(parseInt(window.innerWidth / (1000 / 145)), 400);\r\n        const proton = new Proton();\r\n\r\n        const emitter = new Proton.Emitter();\r\n        emitter.rate = new Proton.Rate(\r\n            new Proton.Span(num),\r\n            new Proton.Span(0.05, 0.2)\r\n        );\r\n        emitter.addInitialize(new Proton.Mass(1));\r\n        emitter.addInitialize(new Proton.Radius(1, 4));\r\n        emitter.addInitialize(new Proton.Life(Infinity));\r\n\r\n        const pointZone = new Proton.Position(\r\n            new Proton.RectZone(0, 0, canvas.width, canvas.height)\r\n        );\r\n        emitter.addInitialize(pointZone);\r\n        emitter.addInitialize(\r\n            new Proton.Velocity(\r\n                new Proton.Span(0.3, 0.6),\r\n                new Proton.Span(0, 360),\r\n                \"polar\"\r\n            )\r\n        );\r\n\r\n        emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\r\n        emitter.addBehaviour(new Proton.Color(\"#ffffff\"));\r\n        emitter.addBehaviour(\r\n            new Proton.CrossZone(\r\n                new Proton.RectZone(0, 0, canvas.width, canvas.height),\r\n                \"cross\"\r\n            )\r\n        );\r\n\r\n        emitter.emit(\"once\");\r\n        emitter.damping = 0;\r\n        proton.addEmitter(emitter);\r\n\r\n        const renderer = this.createRenderer(canvas);\r\n        proton.addRenderer(renderer);\r\n\r\n        setTimeout(() => {\r\n            emitter.rate = new Proton.Rate(new Proton.Span(3), 0.5);\r\n            emitter.removeInitialize(pointZone);\r\n        }, 0);\r\n\r\n        this.proton = proton;\r\n        this.emitter = emitter;\r\n        this.renderer = renderer;\r\n    }\r\n\r\n    createRenderer(canvas) {\r\n        const R = 140;\r\n        const context = canvas.getContext(\"2d\");\r\n        const renderer = new Proton.CanvasRenderer(canvas);\r\n\r\n        renderer.onProtonUpdateAfter = () => {\r\n            const particles = this.emitter.particles;\r\n            for (let i = 0; i < particles.length; i++) {\r\n                for (let j = i + 1; j < particles.length; j++) {\r\n                    const pA = particles[i];\r\n                    const pB = particles[j];\r\n                    const dis = pA.p.distanceTo(pB.p);\r\n\r\n                    if (dis < R) {\r\n                        const alpha = (1 - dis / R) * 0.5;\r\n                        context.strokeStyle = \"rgba(255,255,255,\" + alpha + \")\";\r\n                        context.beginPath();\r\n                        context.moveTo(pA.p.x, pA.p.y);\r\n                        context.lineTo(pB.p.x, pB.p.y);\r\n                        context.closePath();\r\n                        context.stroke();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return renderer;\r\n    }\r\n\r\n    handleResize(width, height) {\r\n        this.renderer.resize(width, height);\r\n    }\r\n\r\n    handleMouseDown(e) {\r\n        for (var i = 0; i < 3; i++) this.emitter.particles[i].dead = true;\r\n\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n        setTimeout(() => {\r\n            this.emitter.p.x = x;\r\n            this.emitter.p.y = y;\r\n            this.emitter.emit(\"once\");\r\n        }, 60);\r\n    }\r\n\r\n    handleMouseMove(e) {\r\n        const ease = 0.3;\r\n        const p0 = this.emitter.particles[0];\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        p0.p.x += (x - p0.p.x) * ease;\r\n        p0.p.y += (y - p0.p.y) * ease;\r\n        p0.radius = 0;\r\n    }\r\n\r\n    handleMouseUp(e) {\r\n        this.emitter.stop();\r\n    }\r\n\r\n    renderProton() {\r\n        this.proton.update();\r\n        // this.proton.stats.update(2);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Canvas\r\n                onMouseDown={this.handleMouseDown.bind(this)}\r\n                onMouseMove={this.handleMouseMove.bind(this)}\r\n                onMouseUp={this.handleMouseUp.bind(this)}\r\n                onCanvasInited={this.handleCanvasInited.bind(this)}\r\n                onResize={this.handleResize.bind(this)}\r\n            />\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}