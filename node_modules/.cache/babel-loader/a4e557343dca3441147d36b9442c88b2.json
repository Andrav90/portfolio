{"ast":null,"code":"var _jsxFileName = \"E:\\\\Coding\\\\React\\\\portofolio-with-effects\\\\src\\\\components\\\\Particles.js\";\nimport React from \"react\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport Canvas from \"./Canvas\";\nexport default class Particles extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderProton = this.renderProton.bind(this);\n  }\n\n  handleCanvasInited(canvas) {\n    this.createProton(canvas);\n    RAFManager.add(this.renderProton);\n  }\n\n  componentWillUnmount() {\n    try {\n      RAFManager.remove(this.renderProton);\n      this.proton.destroy();\n    } catch (e) {}\n  }\n\n  createProton(canvas) {\n    const num = Math.min(parseInt(window.innerWidth / (1000 / 145)), 400);\n    const proton = new Proton();\n    const emitter = new Proton.Emitter();\n    emitter.rate = new Proton.Rate(new Proton.Span(num), new Proton.Span(0.05, 0.2));\n    emitter.addInitialize(new Proton.Mass(1));\n    emitter.addInitialize(new Proton.Radius(1, 4));\n    emitter.addInitialize(new Proton.Life(Infinity));\n    const pointZone = new Proton.Position(new Proton.RectZone(0, 0, canvas.width, canvas.height));\n    emitter.addInitialize(pointZone);\n    emitter.addInitialize(new Proton.Velocity(new Proton.Span(0.3, 0.6), new Proton.Span(0, 360), \"polar\"));\n    emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\n    emitter.addBehaviour(new Proton.Color(\"#ffffff\"));\n    emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(0, 0, canvas.width, canvas.height), \"cross\"));\n    emitter.emit(\"once\");\n    emitter.damping = 0;\n    proton.addEmitter(emitter);\n    const renderer = this.createRenderer(canvas);\n    proton.addRenderer(renderer);\n    setTimeout(() => {\n      emitter.rate = new Proton.Rate(new Proton.Span(3), 0.5);\n      emitter.removeInitialize(pointZone);\n    }, 0);\n    this.proton = proton;\n    this.emitter = emitter;\n    this.renderer = renderer;\n  }\n\n  createRenderer(canvas) {\n    const R = 140;\n    const context = canvas.getContext(\"2d\");\n    const renderer = new Proton.CanvasRenderer(canvas);\n\n    renderer.onProtonUpdateAfter = () => {\n      const particles = this.emitter.particles;\n\n      for (let i = 0; i < particles.length; i++) {\n        for (let j = i + 1; j < particles.length; j++) {\n          const pA = particles[i];\n          const pB = particles[j];\n          const dis = pA.p.distanceTo(pB.p);\n\n          if (dis < R) {\n            const alpha = (1 - dis / R) * 0.5;\n            context.strokeStyle = \"rgba(255,255,255,\" + alpha + \")\";\n            context.beginPath();\n            context.moveTo(pA.p.x, pA.p.y);\n            context.lineTo(pB.p.x, pB.p.y);\n            context.closePath();\n            context.stroke();\n          }\n        }\n      }\n    };\n\n    return renderer;\n  }\n\n  handleResize(width, height) {\n    this.renderer.resize(width, height);\n  }\n\n  handleMouseDown(e) {\n    for (var i = 0; i < 3; i++) this.emitter.particles[i].dead = true;\n\n    const x = e.nativeEvent.offsetX;\n    const y = e.nativeEvent.offsetY;\n    setTimeout(() => {\n      this.emitter.p.x = x;\n      this.emitter.p.y = y;\n      this.emitter.emit(\"once\");\n    }, 60);\n  }\n\n  handleMouseMove(e) {\n    const ease = 0.3;\n    const p0 = this.emitter.particles[0];\n    const x = e.nativeEvent.offsetX;\n    const y = e.nativeEvent.offsetY;\n    p0.p.x += (x - p0.p.x) * ease;\n    p0.p.y += (y - p0.p.y) * ease;\n    p0.radius = 6;\n  }\n\n  handleMouseUp(e) {\n    this.emitter.stop();\n  }\n\n  renderProton() {\n    this.proton.update(); //this.proton.stats.update(2);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Canvas, {\n      onMouseDown: this.handleMouseDown.bind(this),\n      onMouseMove: this.handleMouseMove.bind(this),\n      onMouseUp: this.handleMouseUp.bind(this),\n      onCanvasInited: this.handleCanvasInited.bind(this),\n      onResize: this.handleResize.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["E:/Coding/React/portofolio-with-effects/src/components/Particles.js"],"names":["React","Proton","RAFManager","Canvas","Particles","Component","constructor","props","renderProton","bind","handleCanvasInited","canvas","createProton","add","componentWillUnmount","remove","proton","destroy","e","num","Math","min","parseInt","window","innerWidth","emitter","Emitter","rate","Rate","Span","addInitialize","Mass","Radius","Life","Infinity","pointZone","Position","RectZone","width","height","Velocity","addBehaviour","Alpha","getSpan","Color","CrossZone","emit","damping","addEmitter","renderer","createRenderer","addRenderer","setTimeout","removeInitialize","R","context","getContext","CanvasRenderer","onProtonUpdateAfter","particles","i","length","j","pA","pB","dis","p","distanceTo","alpha","strokeStyle","beginPath","moveTo","x","y","lineTo","closePath","stroke","handleResize","resize","handleMouseDown","dead","nativeEvent","offsetX","offsetY","handleMouseMove","ease","p0","radius","handleMouseUp","stop","update","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Proton from \"proton-engine\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Canvas from \"./Canvas\";\r\n\r\nexport default class Particles extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderProton = this.renderProton.bind(this);\r\n    }\r\n\r\n    handleCanvasInited(canvas) {\r\n        this.createProton(canvas);\r\n        RAFManager.add(this.renderProton);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        try {\r\n            RAFManager.remove(this.renderProton);\r\n            this.proton.destroy();\r\n        } catch (e) { }\r\n    }\r\n\r\n    createProton(canvas) {\r\n        const num = Math.min(parseInt(window.innerWidth / (1000 / 145)), 400);\r\n        const proton = new Proton();\r\n\r\n        const emitter = new Proton.Emitter();\r\n        emitter.rate = new Proton.Rate(\r\n            new Proton.Span(num),\r\n            new Proton.Span(0.05, 0.2)\r\n        );\r\n        emitter.addInitialize(new Proton.Mass(1));\r\n        emitter.addInitialize(new Proton.Radius(1, 4));\r\n        emitter.addInitialize(new Proton.Life(Infinity));\r\n\r\n        const pointZone = new Proton.Position(\r\n            new Proton.RectZone(0, 0, canvas.width, canvas.height)\r\n        );\r\n        emitter.addInitialize(pointZone);\r\n        emitter.addInitialize(\r\n            new Proton.Velocity(\r\n                new Proton.Span(0.3, 0.6),\r\n                new Proton.Span(0, 360),\r\n                \"polar\"\r\n            )\r\n        );\r\n\r\n        emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\r\n        emitter.addBehaviour(new Proton.Color(\"#ffffff\"));\r\n        emitter.addBehaviour(\r\n            new Proton.CrossZone(\r\n                new Proton.RectZone(0, 0, canvas.width, canvas.height),\r\n                \"cross\"\r\n            )\r\n        );\r\n\r\n        emitter.emit(\"once\");\r\n        emitter.damping = 0;\r\n        proton.addEmitter(emitter);\r\n\r\n        const renderer = this.createRenderer(canvas);\r\n        proton.addRenderer(renderer);\r\n\r\n        setTimeout(() => {\r\n            emitter.rate = new Proton.Rate(new Proton.Span(3), 0.5);\r\n            emitter.removeInitialize(pointZone);\r\n        }, 0);\r\n\r\n        this.proton = proton;\r\n        this.emitter = emitter;\r\n        this.renderer = renderer;\r\n    }\r\n\r\n    createRenderer(canvas) {\r\n        const R = 140;\r\n        const context = canvas.getContext(\"2d\");\r\n        const renderer = new Proton.CanvasRenderer(canvas);\r\n\r\n        renderer.onProtonUpdateAfter = () => {\r\n            const particles = this.emitter.particles;\r\n            for (let i = 0; i < particles.length; i++) {\r\n                for (let j = i + 1; j < particles.length; j++) {\r\n                    const pA = particles[i];\r\n                    const pB = particles[j];\r\n                    const dis = pA.p.distanceTo(pB.p);\r\n\r\n                    if (dis < R) {\r\n                        const alpha = (1 - dis / R) * 0.5;\r\n                        context.strokeStyle = \"rgba(255,255,255,\" + alpha + \")\";\r\n                        context.beginPath();\r\n                        context.moveTo(pA.p.x, pA.p.y);\r\n                        context.lineTo(pB.p.x, pB.p.y);\r\n                        context.closePath();\r\n                        context.stroke();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        return renderer;\r\n    }\r\n\r\n    handleResize(width, height) {\r\n        this.renderer.resize(width, height);\r\n    }\r\n\r\n    handleMouseDown(e) {\r\n        for (var i = 0; i < 3; i++) this.emitter.particles[i].dead = true;\r\n\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n        setTimeout(() => {\r\n            this.emitter.p.x = x;\r\n            this.emitter.p.y = y;\r\n            this.emitter.emit(\"once\");\r\n        }, 60);\r\n    }\r\n\r\n    handleMouseMove(e) {\r\n        const ease = 0.3;\r\n        const p0 = this.emitter.particles[0];\r\n        const x = e.nativeEvent.offsetX;\r\n        const y = e.nativeEvent.offsetY;\r\n\r\n        p0.p.x += (x - p0.p.x) * ease;\r\n        p0.p.y += (y - p0.p.y) * ease;\r\n        p0.radius = 6;\r\n    }\r\n\r\n    handleMouseUp(e) {\r\n        this.emitter.stop();\r\n    }\r\n\r\n    renderProton() {\r\n        this.proton.update();\r\n        //this.proton.stats.update(2);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Canvas\r\n                onMouseDown={this.handleMouseDown.bind(this)}\r\n                onMouseMove={this.handleMouseMove.bind(this)}\r\n                onMouseUp={this.handleMouseUp.bind(this)}\r\n                onCanvasInited={this.handleCanvasInited.bind(this)}\r\n                onResize={this.handleResize.bind(this)}\r\n            />\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}